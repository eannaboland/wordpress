function UpdraftCentral_UpdraftPlus_Module(){function t(t,e,a){if(y(t).find(".updraft_finished").length>0)return UpdraftCentral.get_debug_level()>1&&console.log("UDCentral: UpdraftPlus backup listener: job finished"),0;var r=y(t).data("job_id");return{call:"updraftplus.backup_progress",data:{job_id:r}}}function e(t,e,a,r){var n="";r.hasOwnProperty("l")&&(n+="<strong>"+udclion.updraftplus.lastlogline+":</strong> "+r.l+"<br>"),r.hasOwnProperty("j")&&(n+=r.j),y(t).find(".backup_state:first").html(UpdraftCentral_Library.sanitize_html(n));var d="undefined"===jQuery.type(y(t).find(".updraft_percentage").data("info"))?udclion.updraftplus.missing_data_attributes:UpdraftCentral_Library.sanitize_html(y(t).find(".updraft_percentage").data("info")),s="undefined"===jQuery.type(y(t).find(".updraft_percentage").data("progress"))?"0":UpdraftCentral_Library.quote_attribute(y(t).find(".updraft_percentage").data("progress")),u="<div class='text-xs-center' id='info"+a+"'>"+d+"</div>";u+="<progress class='progress progress-updraftcentral' value='"+s+"' max='100' ></progress>",y(t).find(".curstage").html(u)}function a(t,e,a){var r=[],n=null;return y(t).find(".updraftplus_downloader").each(function(t,e){y(e).data("updraft_finished")?null===n&&(n=!0):n=!1;var d=y(e).data("findex"),s=y(e).data("what"),u=y(e).data("backup_timestamp");r.push(a+","+u+","+s+","+d)}),n?(console.log("UDCentral: UpdraftPlus download listener: job finished - will not poll any more"),1):{call:"updraftplus.get_download_status",data:r}}function r(t){var e=t.base,a=(t.f,t.findex),r=(t.m,t.hasOwnProperty("p")?t.p:null,t.s,t.t,t.timestamp),n=t.what,d=e+"_"+r+"_"+n+"_"+a,s="#updraftcentral_notice_container ."+d,u=0;if(t.hasOwnProperty("failed")&&t.failed&&y(s).data("updraft_finished",!0),t.hasOwnProperty("e")&&t.e)y(s+" .raw").html("<strong>"+udclion.error+":</strong> "+t.e),console.log("UDCentral: UpdraftPlus: downloader ("+d+"): an error was returned (follows)"),console.log(t);else if(null!==t.p){if(y(s+"_st .dlfileprogress").width(t.p+"%"),null!=t.a&&t.a>0){var i=(new Date).getTime(),o=y(s).data("last_time_began"),_=i-o;if(t.a>90&&_>6e4){console.log("UDCentral: UpdraftPlus: "+d+": restarting download: file_age="+t.a+", since_last_restart_ms="+_);var l={type:n,timestamp:r,findex:a},p=y('#updraftcentral_dashboard_existingsites .updraftcentral_site_row[data-site_id="'+e+'"');y(s).data("last_time_began",(new Date).getTime()),UpdraftCentral.send_site_rpc("updraftplus.downloader",l,p,function(t,e,a){"ok"!=e&&(y(s+" .raw").html(udclion.updraftplus.backup_start_failed),console.log("code="+e+", error_code="+a),console.log(t))})}}t.hasOwnProperty("m")&&null!=t.m&&(t.p<100?y(s+" .raw").html(t.m):(msg=template_replace("updraftplus-downloaded",{file_ready:udclion.updraftplus.file_ready,download_to_computer:udclion.updraftplus.download_to_computer,and_then:udclion.updraftplus.and_then,you_should:udclion.updraftplus.you_should,backup_timestamp:r,site_id:e,what:n,findex:a,delete_from_server:udclion.updraftplus.delete_from_server}),y(s).data("updraft_finished",!0),y(s+" .raw").html(msg)))}else null!=t.m?y(s+" .raw").html(t.m):(y(s+" .raw").html(udclion.updraftplus.backup_start_failed),u=1);return u}function n(t,e,a,n){y.each(n,function(t,e){if(e.hasOwnProperty("base")){r(e)}})}function d(t,e,a,r,n,d,s){"string"!=typeof r&&(r=r.toString()),d=!!d,r=r.split(",");var u=y('#updraftcentral_notice_container .updraftcentral_listener_updraftplus_download[data-site_id="'+t+'"');0==u.length&&(u=!1);for(var i=0;i<r.length;i++){var o=r[i],_=t+"_"+e+"_"+a+"_"+o,l="."+_;if(y(l).length)return void console.log("UDCentral: There already appears to be an active downloader for this entity (stid: "+_+")");var p={type:a,timestamp:e,findex:o};UpdraftCentral.send_site_rpc("updraftplus.downloader",p,UpdraftCentral.$site_row,function(e,a,r){if("ok"==a&&!1!==e&&e.hasOwnProperty("data")&&e.data.hasOwnProperty("result")){var d=e.data.result,s=e.data.request,i=s.timestamp,o=s.type,_=parseInt(s.findex),l=t+"_"+i+"_"+o+"_"+_,p="."+l,c="??",f=(new Date).getTime(),h=_+1,g=0==_?"":" ("+h+")",m=n?n:i;widgets_html=template_replace("updraftplus-downloader",{stid:l,download_verb:udclion.updraftplus.download_verb,what:o,itext:g,pretty_date:m,begun_looking:udclion.updraftplus.begun_looking,site_id:t,backup_timestamp:i,findex:_}),"downloaded"==d?c=template_replace("updraftplus-downloaded",{file_ready:udclion.updraftplus.file_ready,download_to_computer:udclion.updraftplus.download_to_computer,and_then:udclion.updraftplus.and_then,you_should:udclion.updraftplus.you_should,backup_timestamp:i,site_id:t,what:o,findex:_,delete_from_server:udclion.updraftplus.delete_from_server}):"needs_download"==d?c=udclion.updraftplus.needs_download:"download_failed"==d&&(c=udclion.updraftplus.download_failed),!1===u?u=UpdraftCentral.create_dashboard_listener("updraftplus_download",UpdraftCentral.$site_row,widgets_html):u.append(widgets_html),u.data("finished",!1),u.find(p).data("last_time_began",f),u.find(p+" .raw").html(c)}else UpdraftCentral.add_dashboard_notice("<h2>"+UpdraftCentral.$site_row.data("site_description")+"</h2>"+udclion.updraftplus.download_start_failed,"error")})}}function s(t){t.find(".updraftcentral_row_extracontents").css("opacity","0.3"),UpdraftCentral.send_site_rpc("updraftplus.get_settings",{include_database_decrypter:0,include_adverts:0,include_save_button:1},t,function(e,a,r){if(t.find(".updraftcentral_row_extracontents").css("opacity","1.0"),"ok"==a&&e){if(t.find(".updraftcentral_row_extracontents").html('<div class="updraft_site_settings_output"><div class="dashicons dashicons-image-rotate updraftcentral_site_backup_settings"></div>'+UpdraftCentral_Library.sanitize_html(e.data.settings)+"</div>"),t.find('.updraftcentral_row_extracontents #remote-storage-container > input[type="checkbox"]').each(function(){var t=jQuery(this);t.attr("aria-label",udclion.updraftplus.backup_using+" "+t.val()+"?")}),h(),x(),D=0,P=0,e.data.hasOwnProperty("meta")){var n=e.data.meta;n.hasOwnProperty("retain_rules")&&n.retain_rules.hasOwnProperty("files")&&m(n.retain_rules.files,n.retain_rules.db),n.hasOwnProperty("extra_dbs")&&y.each(n.extra_dbs,function(t,e){e.hasOwnProperty("host")&&u(e.host,e.user,e.name,e.pass,e.prefix)})}e.data.hasOwnProperty("updraftplus_version")&&(O=e.data.updraftplus_version),v("uploads"),v("others"),v("wpcore"),q=y("#updraftcentral_dashboard_existingsites .updraftcentral_row_extracontents .updraft_site_settings_output #updraft_report_cell .updraft_reportbox").length+2,y("#updraftcentral_dashboard_existingsites .updraftcentral_row_extracontents .updraft_site_settings_output #updraft_include_more_paths input.updraft_include_more_path").each(function(t,e){var a=y(e).data(a);a>P&&(P=a)}),y('#updraftcentral_dashboard_existingsites .updraftcentral_row_extracontents .updraft_site_settings_output input[type="submit"]').removeClass().addClass("btn btn-primary-outline"),y("#updraftcentral_dashboard_existingsites .updraft_site_settings_output .updraft_webdav_settings").on("change keyup paste",function(){var t=[],e="";y(".updraft_webdav_settings").each(function(a,r){var n=y(r).attr("id");if(n&&"updraft_webdav_settings_"==n.substring(0,24)){var d=n.substring(24);t[d]=this.value}else if(n&&"updraft_webdav_"==n.substring(0,15)){var d=n.substring(15);id_split=d.split("_"),d=id_split[0],e=id_split[1],t[d]=this.value}});var a="",r="@",n="/",d=":",s=":";(t.host.indexOf("@")>=0||""===t.host)&&(r=""),t.host.indexOf("/")>=0?y("#updraft_webdav_host_error").show():y("#updraft_webdav_host_error").hide(),0!=t.path.indexOf("/")&&""!==t.path||(n=""),""!==t.user&&""!==t.pass||(d=""),""!==t.host&&""!==t.port||(s=""),a=t.webdav+t.user+d+t.pass+r+encodeURIComponent(t.host)+s+t.port+n+t.path,""==e?y("#updraftcentral_dashboard .updraft_site_settings_output #updraft_webdav_settings_url").val(a):y("#updraftcentral_dashboard .updraft_site_settings_output #updraft_webdav_url_"+e).val(a)})}})}function u(t,e,a,r,n){D++,y(template_replace("updraftplus-settings-extra-db",{updraft_extra_dbs:D,remove:udclion.updraftplus.remove,backup_external_database:udclion.updraftplus.backup_external_database,host:udclion.updraftplus.host,database:udclion.updraftplus.database,username:udclion.updraftplus.username,password:udclion.updraftplus.password,table_prefix:udclion.updraftplus.table_prefix,backup_tables_with_prefixes:udclion.updraftplus.backup_tables_with_prefixes,test_connection:udclion.updraftplus.test_connection},{host_attr:t,user_attr:e,name_attr:a,pass_attr:r,prefix_attr:n})).appendTo(y("#updraft_backupextradbs")).fadeIn()}function i(){UpdraftCentral.register_row_clicker(".row_backupnow, .updraftcentral_site_backup_now",function(t){l(t)}),UpdraftCentral.register_modal_listener("#backupnow_includefiles_showmoreoptions",function(t){t.preventDefault(),y("#updraftcentral_modal #backupnow_includefiles_moreoptions").slideToggle()}),UpdraftCentral.register_modal_listener("#backupnow_database_showmoreoptions",function(t){t.preventDefault(),y("#updraftcentral_modal #backupnow_database_moreoptions").slideToggle()})}function o(t,e){var a,r=t.closest(".updraftcentral_site_row"),n=t.data("method"),d=t.data("method_label"),s=t.data("instance_id");a=s?".updraftplusmethod."+n+"-"+s:".updraftplusmethod."+n,t.html(sprintf(udclion.updraftplus.testing_settings,d));var u={method:n};y("#updraftcentral_dashboard_existingsites .updraftcentral_row_extracontents .updraft_site_settings_output "+a+" input[data-updraft_settings_test], #updraftcentral_dashboard_existingsites .updraftcentral_row_extracontents .updraft_site_settings_output .expertmode input[data-updraft_settings_test]").each(function(t,e){var a=y(e).data("updraft_settings_test"),r=y(e).attr("type");if(a){r||(console.log("UpdraftCentral: UpdraftPlus: settings test input item with no type found"),console.log(e),r="text");var n=null;"checkbox"==r?n=y(e).is(":checked")?1:0:"text"==r||"password"==r?n=y(e).val():(console.log("UpdraftCentral: UpdraftPlus: settings test input item with unrecognised type ("+r+") found"),console.log(e)),u[a]=n}}),y("#updraftcentral_dashboard_existingsites .updraftcentral_row_extracontents .updraft_site_settings_output "+a+" textarea[data-updraft_settings_test], #updraftcentral_dashboard_existingsites .updraftcentral_row_extracontents .updraft_site_settings_output "+a+" select[data-updraft_settings_test]").each(function(t,e){var a=y(e).data("updraft_settings_test");u[a]=y(e).val()}),UpdraftCentral.send_site_rpc("updraftplus.test_storage_settings",u,r,function(a,r,n){"ok"==r&&a&&(t.html(sprintf(udclion.updraftplus.test_settings,d)),"undefined"!=typeof e&&0!=e&&(e=e.call(this,a,r,n,u)),"undefined"!=typeof e&&!1===e&&UpdraftCentral_Library.dialog.alert("<h2>"+sprintf(udclion.updraftplus.settings_test_result,d)+"</h2> "+a.data.output))},t.closest("td"))}function _(t){t.find(".updraftcentral_row_extracontents").css("opacity","0.3");var e=navigator.userAgent.match(/Opera|OPR\//)?1:0;UpdraftCentral.send_site_rpc("updraftplus.get_fragment",{fragment:"panel_download_and_restore",data:{include_opera_warning:e,include_uploader:0,will_immediately_calculate_disk_space:0,include_header:1}},t,function(e,a,r){t.find(".updraftcentral_row_extracontents").css("opacity","1.0"),"ok"==a&&e&&t.find(".updraftcentral_row_extracontents").html('<div class="updraft_existing_backups_output"><div class="dashicons dashicons-image-rotate updraftcentral_site_backups_manage" style="float:right;"></div>'+UpdraftCentral_Library.sanitize_html(e.data.output)+"</div>")})}function l(t){UpdraftCentral.send_site_rpc("updraftplus.get_fragment","backupnow_modal_contents",t,function(t,e,a){if("ok"==e&&t){var r=t.data.output.hasOwnProperty("error")&&t.data.output.error,n=!r&&udclion.updraftplus.backupnow;UpdraftCentral.open_modal(udclion.updraftplus.backupnow,t.data.output.html,function(){var t=y("#updraftcentral_modal #backupnow_includedb").is(":checked")?0:1,e=y("#updraftcentral_modal #backupnow_includefiles").is(":checked")?0:1,a=y("#updraftcentral_modal #backupnow_includecloud").is(":checked")?0:1,r="";y('#updraftcentral_modal #backupnow_includefiles_moreoptions input[type="checkbox"]').each(function(t){if(y(this).is(":checked")){var e=y(this).attr("name");if("updraft_include_"==e.substring(0,16)){var a=e.substring(16);""!=r&&(r+=","),r+=a}}});var n="",d=!1;return y('#backupnow_database_moreoptions input[type="checkbox"]').each(function(t){if(!y(this).is(":checked"))return void(d=!0)}),n=!d||jQuery("input[name^='updraft_include_tables_']").serializeArray(),""==r&&0==e?void UpdraftCentral_Library.dialog.alert(udclion.updraftplus.nofileschosen):""==n&&0==t?void UpdraftCentral_Library.dialog.alert(udclion.updraftplus.notableschosen):(d||(n=null),t&&e?void UpdraftCentral_Library.dialog.alert(udclion.updraftplus.excludedeverything):(UpdraftCentral.close_modal(),void UpdraftCentral_Module_UpdraftPlus.backupnow_go(t,e,a,r,"",y("#updraftcentral_modal #backupnow_label").val(),n)))},n,function(){y("#updraftcentral_modal #backupnow_includefiles_moreoptions").hide(),y("#updraftcentral_modal #updraft_backupnow_gotosettings").contents().unwrap()},!0,"backup-now")}})}function p(t,e){UpdraftCentral.send_site_rpc("updraftplus.get_log",t,e,function(e,a,r){"ok"==a&&e&&UpdraftCentral.open_modal(udclion.updraftplus.logfile,'<pre id="updraft_poppedlog">'+UpdraftCentral_Library.sanitize_html(e.data.log)+"</pre>",function(){UpdraftCentral_Library.download_inner_html("log."+t+".txt","updraft_poppedlog")},udclion.updraftplus.downloadlog,function(){},null,!0,"modal-lg")})}function c(t,e,a){var r=udclion.updraftplus.delete_areyousure_singular;t.indexOf(",")>-1&&(r=udclion.updraftplus.delete_areyousure_plural),UpdraftCentral.open_modal(udclion.updraftplus.deletebackupset,UpdraftCentral.template_replace("updraftplus-deletebackup",{nonce:e,timestamp:t,delete_question:r,also_delete_from_remote:udclion.updraftplus.also_delete_from_remote,deleting_please_allow_time:udclion.updraftplus.deleting_please_allow_time}),function(){var t=y("#updraft_delete_modal_contents").data("nonce").toString(),e=y("#updraft_delete_modal_contents").data("timestamp").toString(),a=0;y("#updraft_delete_modal_contents #updraft_delete_remote").is(":checked")&&(a=1),y("#updraftcentral_modal #updraft-delete-waitwarning").slideDown();var r=!!navigator.userAgent.match(/Opera|OPR\//);UpdraftCentral.send_site_rpc("updraftplus.deleteset",{backup_nonce:t,backup_timestamp:e,delete_remote:a,get_history_opts:{include_opera_warning:r,include_uploader:!1,will_immediately_calculate_disk_space:!1,include_header:!0}},UpdraftCentral.$site_row,function(t,e,a){if(y("#updraftcentral_modal #updraft-delete-waitwarning").slideUp(),"ok"==e&&t){var r=t.data;null!=r.result&&("error"==r.result?UpdraftCentral_Library.dialog.alert("<h2>"+udclion.error+"</h2>"+r.message):"success"==r.result&&(r.hasOwnProperty("history")?UpdraftCentral.$site_row.find(".updraftcentral_row_extracontents").html('<div class="updraft_existing_backups_output">'+UpdraftCentral_Library.sanitize_html(r.history)+"</div>"):_(UpdraftCentral.$site_row),UpdraftCentral.close_modal(),UpdraftCentral_Library.dialog.alert("<h2>"+udclion.updraftplus.deleted+"</h2>"+r.message)))}})},udclion.updraftplus["delete"],function(){a?y("#updraft-delete-remote-section, #updraft_delete_remote").removeAttr("disabled").show():y("#updraft-delete-remote-section").remove()})}function f(t,e,a){UpdraftCentral.send_site_rpc("updraftplus.activejobs_delete",t,e,function(t,e,r){if("ok"==e&&t){var n="";t.hasOwnProperty("data")&&t.data.hasOwnProperty("c")?"deleted"==t.data.c?n=udclion.updraftplus.delete_deleted:"not_found"==t.data.c?n=udclion.updraftplus.delete_not_found:(console.log("UDCentral: UpdraftPlus: abort job: unknown response"),console.log(t.data),n=UpdraftCentral_Library.sanitize_html(t.data.m)):(console.log("UDCentral: UpdraftPlus: abort job: unknown response"),console.log(t.data),n=udclion.js_exception_occurred),y(a).find(".backup_state:first").html(n)}})}function h(){var t=0,e=y("#updraftcentral_dashboard_existingsites .updraft_site_settings_output .updraft_interval").val();"manual"==e?y("#updraftcentral_dashboard_existingsites .updraft_site_settings_output .updraft_files_timings").hide():y("#updraftcentral_dashboard_existingsites .updraft_site_settings_output .updraft_files_timings").show(),"weekly"==e||"fortnightly"==e||"monthly"==e?(g("updraft_startday_files",e),y("#updraftcentral_dashboard_existingsites .updraft_site_settings_output #updraft_startday_files").show()):(y("#updraftcentral_dashboard_existingsites .updraft_monthly_extra_words_updraft_startday_files").remove(),y("#updraftcentral_dashboard_existingsites .updraft_site_settings_output #updraft_startday_files").hide());var a=y("#updraftcentral_dashboard_existingsites .updraft_site_settings_output .updraft_interval_database").val();"manual"==a&&(t=1,y("#updraftcentral_dashboard_existingsites .updraft_site_settings_output .updraft_db_timings").hide()),"weekly"==a||"fortnightly"==a||"monthly"==a?(g("updraft_startday_db",a),y("#updraftcentral_dashboard_existingsites .updraft_site_settings_output #updraft_startday_db").show()):(y("#updraftcentral_dashboard_existingsites .updraft_monthly_extra_words_updraft_startday_db").remove(),y("#updraftcentral_dashboard_existingsites .updraft_site_settings_output #updraft_startday_db").hide()),a==e?(y("#updraftcentral_dashboard_existingsites .updraft_site_settings_output .updraft_db_timings").hide(),0==t?y("#updraftcentral_dashboard_existingsites .updraft_site_settings_output .updraft_same_schedules_message").show():y("#updraftcentral_dashboard_existingsites .updraft_site_settings_output .updraft_same_schedules_message").hide()):(y("#updraftcentral_dashboard_existingsites .updraft_site_settings_output .updraft_same_schedules_message").hide(),0==t&&y("#updraftcentral_dashboard_existingsites .updraft_site_settings_output .updraft_db_timings").show())}function g(t,e){var a="#updraftcentral_dashboard_existingsites .updraft_site_settings_output #"+t,r=y(a+" option").length,n="monthly"==e,d=!1;if(r>10&&(d=!0),n||d){if(n&&d)return void("monthly"==e&&(y("#updraftcentral_dashboard_existingsites .updraft_site_settings_output .updraft_monthly_extra_words_"+t).remove(),y(a).before('<span class="updraft_monthly_extra_words_'+t+'">'+udclion.updraftplus.day+" </span>").after('<span class="updraft_monthly_extra_words_'+t+'"> '+udclion.updraftplus.in_the_month+" </span>")));if(y("#updraftcentral_dashboard_existingsites .updraft_site_settings_output .updraft_monthly_extra_words_"+t).remove(),n){z=y(a+" option:selected").val(),y(a).html(udclion.updraftplus.mday_selector).before('<span class="updraft_monthly_extra_words_'+t+'">'+udclion.updraftplus.day+" </span>").after('<span class="updraft_monthly_extra_words_'+t+'"> '+udclion.updraftplus.in_the_month+" </span>");var s=$===!1?1:$;s-=1,y(a+" option:eq("+s+")").prop("selected",!0)}else{$=y(a+" option:selected").val(),y(a).html(udclion.updraftplus.day_selector);var u=z===!1?1:z;y(a+" option:eq("+u+")").prop("selected",!0)}}}function m(t,e){L=0,j=0,y.each(t,function(t,e){w("files",e.after_howmany,e.after_period,e.every_howmany,e.every_period)}),y.each(e,function(t,e){w("db",e.after_howmany,e.after_period,e.every_howmany,e.every_period)})}function w(t,e,a,r,n){var d,s="updraft_retain_"+t+"_rules";"db"==t?(L++,d=L):(j++,d=j),y("#"+s).append('<div style="float:left; clear:left;" class="updraft_retain_rules '+s+'_entry">'+udclion.updraftplus.for_backups_older_than+" "+b(t,d,"after",e,a)+" keep no more than 1 backup every "+b(t,d,"every",r,n)+' <span title="'+udclion.updraftplus["delete"]+'" class="updraft_retain_rules_delete">X</span></div>')}function b(t,e,a,r,n){var d="updraft_retain_extrarules["+t+"]["+e+"]["+a+"-",s='<input type="number" min="1" step="1" class="additional-rule-width" name="'+d+'howmany]" value="'+r+'"> \t\t<select name="'+d+'period]">\t\t<option value="3600"';return 3600==n&&(s+=' selected="selected"'),s+=">"+udclion.updraftplus.hours+'</option>\t\t<option value="86400"',86400==n&&(s+=' selected="selected"'),s+=">"+udclion.updraftplus.days+'</option>\t\t<option value="604800"',604800==n&&(s+=' selected="selected"'),s+=">"+udclion.updraftplus.weeks+"</option>\t\t</select>"}function v(t,e){y(".updraftcentral_row_extracontents .updraft_site_settings_output #updraft_include_"+t).is(":checked")?e?y(".updraftcentral_row_extracontents .updraft_site_settings_output #updraft_include_"+t+"_exclude").show():y(".updraftcentral_row_extracontents .updraft_site_settings_output #updraft_include_"+t+"_exclude").slideDown():e?y(".updraftcentral_row_extracontents .updraft_site_settings_output #updraft_include_"+t+"_exclude").hide():y(".updraftcentral_row_extracontents .updraft_site_settings_output #updraft_include_"+t+"_exclude").slideUp()}function k(t){var e="#updraftcentral_dashboard_existingsites .updraftcentral_row_extracontents .updraft_site_settings_output";y(e+" .updraftplusmethod").hide(),y(e+" .remote-tab").data("active",!1),y(e+" .remote-tab").removeClass("nav-tab-active"),y(e+" .updraftplusmethod."+t).show(),y(e+" .remote-tab-"+t).data("active",!0),y(e+" .remote-tab-"+t).addClass("nav-tab-active")}function x(){I=0;var t=y("#updraftcentral_dashboard_existingsites .updraftcentral_row_extracontents .updraft_site_settings_output .updraft_servicecheckbox:checked");y(t).each(function(e,a){var r=y(a).val();"updraft_servicecheckbox_none"!=y(a).attr("id")&&I++,y("#updraftcentral_dashboard_existingsites .updraftcentral_row_extracontents .updraft_site_settings_output .remote-tab-"+r).show(),e==y(t).length-1&&k(r)}),I>0?y("#updraftcentral_dashboard_existingsites .updraftcentral_row_extracontents .updraft_site_settings_output .updraftplusmethod.none").hide():(y("#updraftcentral_dashboard_existingsites .updraftcentral_row_extracontents .updraft_site_settings_output .updraftplusmethod:not(.none)").hide(),y("#updraftcentral_dashboard_existingsites .updraftcentral_row_extracontents .updraft_site_settings_output .updraftplusmethod.none").show());var e=y("#updraftcentral_dashboard_existingsites .updraftcentral_row_extracontents .updraft_site_settings_output .updraft_servicecheckbox");"function"==typeof e.labelauty&&e.labelauty()}var y=jQuery,U=".updraftcentral_row_extracontents .updraft_site_settings_output ",C="#updraftcentral_dashboard_existingsites "+U;UpdraftCentral.register_listener_processor("updraftplus_backup",t),UpdraftCentral.register_listener_processor("updraftplus.backup_progress",e),UpdraftCentral.register_listener_processor("updraftplus_download",a),UpdraftCentral.register_listener_processor("updraftplus.get_download_status",n),this.backupnow_go=function(t,e,a,r,n,d,s){var u;n&&n.hasOwnProperty("_listener_title")&&(u=n._listener_title,delete n._listener_title);var i={backupnow_nodb:t,backupnow_nofiles:e,backupnow_nocloud:a,backupnow_label:d,extradata:n};""!=r&&(i.onlythisfileentity=r),""!=s&&(i.onlythesetableentities=s),UpdraftCentral.send_site_rpc("updraftplus.backupnow",i,UpdraftCentral.$site_row,function(t,e,a){if("ok"==e&&!1!==t&&t.hasOwnProperty("data"))if(t.data.hasOwnProperty("nonce")){var r='<div class="backup_state">'+udclion.updraftplus.backupstarted+"</div>";UpdraftCentral.create_dashboard_listener("updraftplus_backup",UpdraftCentral.$site_row,r,{job_id:t.data.nonce},u)}else UpdraftCentral.add_dashboard_notice("<h2>"+UpdraftCentral.$site_row.data("site_description")+"</h2>"+udclion.updraftplus.backup_start_failed,"error")})};var P=0,O=0,D=0;"notices"!=UpdraftCentral.get_dashboard_mode()&&i(),y("#updraftcentral_dashboard_existingsites").on("updraftcentral_dashboard_mode_set",function(t,e){e&&e.hasOwnProperty("new_mode")&&"notices"==e.new_mode||i()}),y("#updraftcentral_dashboard_existingsites").on("updraftcentral_dashboard_mode_set_backups",function(){UpdraftCentral.register_row_clicker(".updraftcentral_row_extracontents .updraft_site_settings_output #updraft_backupextradb_another",function(){u("","","","","")}),UpdraftCentral.register_row_clicker(".updraftcentral_row_extracontents .updraft_site_settings_output #updraft_backupextradbs .updraft_backupextradbs_row_delete",function(){y(this).parents(".updraft_backupextradbs_row").fadeOut("medium",function(){y(this).remove()})}),UpdraftCentral.register_row_clicker(".updraftcentral_row_extracontents .updraft_site_settings_output #updraft_backupextradbs .updraft_backupextradbs_row_testconnection",function(){var t=y(this).closest(".updraft_backupextradbs_row");t.find(".updraft_backupextradbs_testresultarea").html("<p><em>"+udclion.updraftplus.testing+"</em></p>");var e={row:t.attr("id"),host:t.find(".extradb_host").val(),user:t.find(".extradb_user").val(),pass:t.find(".extradb_pass").val(),name:t.find(".extradb_name").val(),prefix:t.find(".extradb_prefix").val()};UpdraftCentral.send_site_rpc("updraftplus.extradb_testconnection",e,UpdraftCentral.$site_row,function(e,a,r){"ok"==a&&e&&t.find(".updraft_backupextradbs_testresultarea").html(UpdraftCentral_Library.sanitize_html(e.data.m))},t)}),UpdraftCentral.register_row_clicker(".updraftcentral_row_extracontents .updraft_site_settings_output .updraftplusmethod button.updraft-test-button",function(){var t=y(this),e=t.data("method");o(t,function(t,a,r,n){return"sftp"==e&&("undefined"!=typeof n&&n.hasOwnProperty("scp")&&n.scp?UpdraftCentral_Library.dialog.alert("<h2>"+sprintf(udclion.updraftplus.settings_test_result,"SCP")+"</h2> "+t.data.output):UpdraftCentral_Library.dialog.alert("<h2>"+sprintf(udclion.updraftplus.settings_test_result,"SFTP")+"</h2> "+t.data.output),!0)})}),UpdraftCentral.register_row_clicker(".updraftcentral_row_extracontents .updraft_site_settings_output #updraftplus-settings-save",function(t,e){var a=y(C+" input, "+C+" textarea, "+C+" select").serialize();y.each(y(C+" input[type=checkbox]").filter(function(t){return 0==y(this).prop("checked")}),function(t,e){var r="0";a+="&"+y(e).attr("name")+"="+r}),spin_this=y(this).closest("td"),a+="&updraftplus_version="+O,UpdraftCentral.send_site_rpc("updraftplus.save_settings",a,t,function(a,r,n){if("ok"===r){var d=a.data.backup_dir.writable,s=a.data.backup_dir.message;a.data.backup_dir.button_title;0==d?(y(C+"#updraft_writable_mess").html(s),y(C+".backupdirrow").show()):y(C+".backupdirrow").hide();var u=t.data("site_url");y("#updraftcentral_notice_container .updraftplus_saved_settings").closest(".updraftcentral_notice").remove();var i=add_dashboard_notice("<h2>"+udclion.updraftplus.settings_saved+" - "+u+'</h2><div class="updraftplus_saved_settings" data-site_id="'+e+'">'+a.data.messages+"</div>","notice",!1);y("html, body").animate({scrollTop:i.offset().top},1e3)}},spin_this)}),UpdraftCentral.register_row_clicker(U+".backupdirrow a.updraft_backup_dir_reset",function(){y(C+"#updraft_dir").val("updraft")}),UpdraftCentral.register_row_clicker(".updraftcentral_row_extracontents .updraft_site_settings_output .enableexpertmode",function(){y(".updraftcentral_row_extracontents .updraft_site_settings_output .expertmode").fadeIn(),y(".updraftcentral_row_extracontents .updraft_site_settings_output .enableexpertmode").off("click")}),UpdraftCentral.register_row_clicker(U+" a.updraft_authlink",function(t){var e=y(this).attr("href");if("undefined"!=typeof e){var a=y(this).closest("td");UpdraftCentral_Library.open_browser_at(t,{module:"direct_url",url:e},a)}}),UpdraftCentral.register_row_clicker(".updraftcentral_row_extracontents .updraft_site_settings_output .updraft_include_entity",function(){var t=y(this).data("toggle_exclude_field");t&&v(t,!1)},!1,"change"),UpdraftCentral.register_row_clicker(".updraft_existing_backups_output .updraft_existingbackup_date",function(t){var e=y(this).data("rawbackup");null!=e&&""!=e&&UpdraftCentral.open_modal(udclion.updraftplus.raw,e,!0,!1)},!1,"dblclick"),UpdraftCentral.register_row_clicker(".updraft_existing_backups_output .choose-components-button",function(t){var e=this,a=y(e).data("entities"),r=y(e).closest("td");a&&UpdraftCentral_Library.dialog.confirm("<h2>"+udclion.updraftplus.restore_backup+"</h2>"+udclion.updraftplus.pre_restore_message,function(n){n&&UpdraftCentral_Library.open_browser_at(t,{module:"updraftplus",action:"initiate_restore",data:{entities:a,backup_timestamp:y(e).data("backup_timestamp"),showdata:y(e).data("showdata")}},r)})}),UpdraftCentral.register_row_clicker(".updraft_existing_backups_output .updraft_download_button",function(t){var e=t.data("site_id"),a=y(this).data("backup_timestamp"),r=y(this).data("what"),n=y(this).data("set_contents"),s=y(this).data("prettydate"),u=!0,i=y(this).closest("td");d(e,a,r,n,s,u,i)}),UpdraftCentral.register_row_clicker(".updraft_existing_backups_output .updraft-delete-link",function(t){var e=y(this).data("hasremote").toString();e="0"!==e;var a=y(this).data("nonce").toString(),r=y(this).data("key").toString();a?c(r,a,e):console.log("UDCentral: UpdraftPlus: A delete link was clicked, but the backup ID could not be found")}),UpdraftCentral.register_row_clicker(".updraft_existing_backups_output a.updraft_diskspaceused_update",function(t){var e=this.closest("ul");UpdraftCentral.send_site_rpc("updraftplus.get_fragment",{fragment:"disk_usage",data:"updraft"},t,function(e,a,r){"ok"==a&&e&&t.find(".updraft_diskspaceused").html(UpdraftCentral_Library.sanitize_html(e.data.output))},e)}),UpdraftCentral.register_row_clicker(".updraft_existing_backups_output a.updraft_rescan_local",function(t){var e=this.closest("ul");t.find(".updraft_existing_backups").html('<div class="rescanning">'+udclion.updraftplus.rescanning+"</div>"),UpdraftCentral.send_site_rpc("updraftplus.rescan","rescan",t,function(e,a,r){"ok"==a&&e&&(t.find(".updraft_existing_backups").html(e.data.t),t.find(".updraft_existing_backups_output h2").html(e.data.n))},e)}),UpdraftCentral.register_row_clicker(".updraft_existing_backups_output a.updraft_rescan_remote",function(t){var e=this.closest("ul");t.find(".updraft_existing_backups").html('<div class="rescanning">'+udclion.updraftplus.rescanningremote+"</div>"),UpdraftCentral.send_site_rpc("updraftplus.rescan","remotescan",t,function(e,a,r){"ok"==a&&e&&(t.find(".updraft_existing_backups").html(e.data.t),t.find(".updraft_existing_backups_output h2").html(e.data.n))},e,90)}),UpdraftCentral.register_row_clicker(".updraftcentral_site_backups_manage",function(t){_(t)},!0),UpdraftCentral.register_row_clicker(".updraftcentral_site_backup_settings",function(t){s(t)},!0),UpdraftCentral.register_row_clicker(".updraft_site_settings_output select.updraft_interval, .updraft_site_settings_output select.updraft_interval_database",function(){h()},!1,"change"),UpdraftCentral.register_row_clicker(".updraft_site_settings_output #updraft_retain_db_addnew",function(){w("db",12,604800,1,604800)}),UpdraftCentral.register_row_clicker(".updraft_site_settings_output #updraft_retain_files_addnew",function(){w("files",12,604800,1,604800)}),UpdraftCentral.register_row_clicker(".updraft_site_settings_output .updraft_retain_rules_delete, .updraft_site_settings_output .updraft_retain_rules_delete",function(){y(this).parent(".updraft_retain_rules").slideUp(function(){y(this).remove()})}),UpdraftCentral.register_row_clicker(".updraftcentral_row_extracontents .updraft_site_settings_output #updraft_report_cell .updraft_reportbox .updraft_reportbox_delete",function(){y(this).closest(".updraft_reportbox").fadeOut("medium",function(){y(this).remove()})}),UpdraftCentral.register_row_clicker(".updraftcentral_row_extracontents .updraft_site_settings_output #updraft_report_cell .updraft_report_another",function(){y("#updraftcentral_dashboard_existingsites .updraftcentral_row_extracontents .updraft_site_settings_output #updraft_report_cell .updraft_report_another_p").before(template_replace("updraftplus-settings-report-email",{index:q,send_only_on_warnings:udclion.updraftplus.send_only_on_warnings,whole_backup:udclion.updraftplus.whole_backup,email_size_limits:udclion.updraftplus.email_size_limits})),y("#updraft_reportbox_"+q).fadeIn(),q++}),UpdraftCentral.register_row_clicker(".updraftcentral_row_extracontents .updraft_site_settings_output #updraft_include_more",function(){y("#updraftcentral_dashboard_existingsites .updraftcentral_row_extracontents .updraft_site_settings_output #updraft_include_more").is(":checked")?y("#updraftcentral_dashboard_existingsites .updraftcentral_row_extracontents .updraft_site_settings_output #updraft_include_more_options").slideDown():y("#updraftcentral_dashboard_existingsites .updraftcentral_row_extracontents .updraft_site_settings_output #updraft_include_more_options").slideUp();
},!1,"change"),UpdraftCentral.register_row_clicker(".updraftcentral_row_extracontents .updraft_site_settings_output #updraft_include_more_paths_another",function(){P++,y(template_replace("updraftplus-settings-more-paths",{index:P,enter_the_directory:udclion.updraftplus.enter_the_directory,remove:udclion.updraftplus.remove})).appendTo(y(".updraftcentral_row_extracontents .updraft_site_settings_output #updraft_include_more_paths")).slideDown()}),UpdraftCentral.register_row_clicker(".updraftcentral_row_extracontents .updraft_site_settings_output #updraft_include_more_options .updraftplus-morefiles-row-delete",function(){var t=y(this).closest(".updraftplus-morefiles-row");y(t).slideUp("medium",function(){y(this).remove()})}),UpdraftCentral.register_row_clicker(".updraftcentral_row_extracontents .updraft_site_settings_output .updraft_servicecheckbox",function(){var t=y(this).attr("id");if("updraft_servicecheckbox_"==t.substring(0,24)){var e=t.substring(24);null!=e&&""!=e&&(y(this).is(":checked")?(I++,y("#updraftcentral_dashboard_existingsites .updraftcentral_row_extracontents .updraft_site_settings_output .remote-tab-"+e).fadeIn(),k(e)):(I--,y("#updraftcentral_dashboard_existingsites .updraftcentral_row_extracontents .updraft_site_settings_output .remote-tab-"+e).hide(),1==y("#updraftcentral_dashboard_existingsites .updraftcentral_row_extracontents .updraft_site_settings_output .remote-tab-"+e).data("active")&&k(y("#updraftcentral_dashboard_existingsites .updraftcentral_row_extracontents .updraft_site_settings_output .remote-tab:visible").last().attr("name"))))}I<=0?y("#updraftcentral_dashboard_existingsites .updraftcentral_row_extracontents .updraft_site_settings_output .updraftplusmethod.none").fadeIn():y("#updraftcentral_dashboard_existingsites .updraftcentral_row_extracontents .updraft_site_settings_output .updraftplusmethod.none").hide()},!1,"change"),UpdraftCentral.register_row_clicker(".updraftcentral_row_extracontents .updraft_site_settings_output .remote-tab",function(){var t=y(this).attr("name");k(t)}),UpdraftCentral.register_row_clicker(".updraftcentral_row_extracontents .updraft_site_settings_output .updraft_servicecheckbox:not(.multi)",function(){var t=y(this).attr("value");y(this).is(":not(:checked)")?(y("#updraftcentral_dashboard_existingsites .updraftcentral_row_extracontents .updraft_site_settings_output .updraftplusmethod."+t).hide(),y("#updraftcentral_dashboard_existingsites .updraftcentral_row_extracontents .updraft_site_settings_output .updraftplusmethod.none").fadeIn()):y("#updraftcentral_dashboard_existingsites .updraftcentral_row_extracontents .updraft_site_settings_output .updraft_servicecheckbox").not(this).prop("checked",!1)},!1,"change"),UpdraftCentral.register_row_clicker(U+"#updraftvault_settings_cell .updraftvault_backtostart",function(){y(C+"#updraftvault_settings_showoptions").slideUp(),y(C+"#updraftvault_settings_connect").slideUp(),y(C+"#updraftvault_settings_connected").slideUp(),y(C+"#updraftvault_settings_default").slideDown()}),UpdraftCentral.register_row_clicker(U+"#updraftvault_settings_connect input",function(t,e,a){13==a.which&&(y(C+"#updraftvault_connect_go").click(),a.preventDefault())},!1,"keypress"),UpdraftCentral.register_row_clicker(U+"#updraftvault_settings_cell #updraftvault_recountquota",function(){y(C+"#updraftvault_recountquota").html(udclion.updraftplus.counting),UpdraftCentral.send_site_rpc("updraftplus.vault_recount_quota",null,UpdraftCentral.$site_row,function(t,e,a){y(C+"#updraftvault_recountquota").html(udclion.updraftplus.update_quota_count),"ok"==e&&t&&t.hasOwnProperty("data")&&t.data.hasOwnProperty("html")&&(y(C+"#updraftvault_settings_connected").html(t.data.html),t.data.hasOwnProperty("connected")&&(t.data.connected?(y(C+"#updraftvault_settings_default").hide(),y(C+"#updraftvault_settings_connected").show()):(y(C+"#updraftvault_settings_connected").hide(),y(C+"#updraftvault_settings_default").show())))})}),UpdraftCentral.register_row_clicker(U+"#updraftvault_settings_cell #updraftvault_disconnect",function(){y(C+"#updraftvault_disconnect").html(udclion.updraftplus.disconnecting),UpdraftCentral.send_site_rpc("updraftplus.vault_disconnect",null,UpdraftCentral.$site_row,function(t,e,a){y(C+"#updraftvault_disconnect").html(udclion.updraftplus.disconnect),"ok"==e&&t.hasOwnProperty("data")&&(y(C+"#updraftvault_disconnect").html(udclion.updraftplus.disconnect),t.data.hasOwnProperty("html")&&(y(C+"#updraftvault_settings_connected").html(t.data.html).slideUp(),y(C+"#updraftvault_settings_default").slideDown()))})}),UpdraftCentral.register_row_clicker(U+"#updraftvault_connect",function(){y(C+"#updraftvault_settings_default").slideUp(),y(C+"#updraftvault_settings_connect").slideDown()}),UpdraftCentral.register_row_clicker(U+"#updraftvault_showoptions",function(){y(C+"#updraftvault_settings_default").slideUp(),y(C+"#updraftvault_settings_showoptions").slideDown()}),UpdraftCentral.register_row_clicker(U+"#updraft_s3_newapiuser",function(t){var e=this.closest("td");UpdraftCentral.send_site_rpc("updraftplus.get_fragment",{fragment:"s3_new_api_user_form",data:null},t,function(e,a,r){"ok"==a&&e&&UpdraftCentral.open_modal(udclion.updraftplus.create_new_iam_user_and_bucket,e.data.output,function(){y("#updraftcentral_modal #updraft-s3newapiuser-results").empty();var e={adminaccesskey:y("#updraftcentral_modal #updraft_s3newapiuser_adminaccesskey").val(),adminsecret:y("#updraftcentral_modal #updraft_s3newapiuser_adminsecret").val(),newuser:y("#updraftcentral_modal #updraft_s3newapiuser_newuser").val(),bucket:y("#updraftcentral_modal #updraft_s3newapiuser_bucket").val(),region:y("#updraftcentral_modal #updraft_s3newapiuser_region").val(),useservercerts:y("#updraftcentral_modal #updraft_ssl_useservercerts").val(),disableverify:y("#updraftcentral_modal #updraft_ssl_disableverify").val(),nossl:y("#updraftcentral_modal #updraft_ssl_nossl").val(),allowdelete:y("#updraftcentral_modal #updraft_s3newapiuser_allowdelete").is(":checked")?1:0,allowdownload:y("#updraftcentral_modal #updraft_s3newapiuser_allowdownload").is(":checked")?1:0},a=y("#updraftcentral_modal");UpdraftCentral.send_site_rpc("updraftplus.s3_newuser",e,t,function(t,e,a){"ok"==e&&t&&(1==t.data.e?y("#updraftcentral_modal #updraft-s3newapiuser-results").html('<p style="color:red;">'+UpdraftCentral_Library.sanitize_html(t.data.m)+"</p>"):0==t.data.e&&(y("#updraftcentral_modal #updraft-s3newapiuser-results").html('<p style="color:green;">'+UpdraftCentral_Library.sanitize_html(t.data.m)+"</p>"),y(C+"#updraft_s3_apikey").val(t.data.k),y(C+"#updraft_s3_apisecret").val(t.data.s),y(C+"#updraft_s3_rrs").prop(":checked",t.data.r),y(C+"#updraft_s3_path").val(t.data.c),y(C+"#updraft_s3_newapiuser").html(udclion.updraftplus.now_using_iam),UpdraftCentral.close_modal()))},a)},udclion.updraftplus.create)},e)}),UpdraftCentral.register_row_clicker(U+"#updraft_cloudfiles_newapiuser",function(t){var e=this.closest("td");UpdraftCentral.send_site_rpc("updraftplus.get_fragment",{fragment:"cloudfiles_new_api_user_form",data:null},t,function(e,a,r){if("ok"==a){var n=UpdraftCentral.template_replace("updraftplus-cloudfiles_new_api_user",e.data.output);UpdraftCentral.open_modal(udclion.updraftplus.new_api_user,UpdraftCentral_Library.sanitize_html(n),function(){var e=y(this).closest(".modal-dialog").find(".form-table"),a={adminuser:e.find(".adminuser").val(),adminapikey:e.find(".adminapikey").val(),newuser:e.find(".newuser").val(),container:e.find(".container").val(),newemail:e.find(".newemail").val(),location:e.find(".location").val(),region:e.find(".region").val()},r=y(".modal-dialog");UpdraftCentral.send_site_rpc("updraftplus.cloudfiles_newuser",a,t,function(e,a,r){if("ok"==a){UpdraftCentral.close_modal();var n=e.data.u,d=e.data.k,s=e.data.c;t.find("#updraft_cloudfiles_user").val(n),t.find("#updraft_cloudfiles_apikey").val(d),t.find("#updraft_cloudfiles_path").val(s)}else if("error"===r)return UpdraftCentral_Library.dialog.alert("<h3>"+udclion.error+"</h3>"+e.m),!0},r)},udclion.updraftplus.create)}},e)}),UpdraftCentral.register_row_clicker(U+"#updraftvault_connect_go",function(){y(C+"#updraftvault_connect_go").html(udclion.updraftplus.connecting);var t={email:y(C+"#updraftvault_email").val(),pass:y(C+"#updraftvault_pass").val()};UpdraftCentral.send_site_rpc("updraftplus.vault_connect",t,UpdraftCentral.$site_row,function(t,e,a){y(C+"#updraftvault_connect_go").html(udclion.updraftplus.connect),"ok"==e&&t.hasOwnProperty("data")&&(t.data.hasOwnProperty("e")?(UpdraftCentral_Library.dialog.alert("<h2>"+udclion.error+"</h2><p>"+t.data.e+"</p>"),t.data.hasOwnProperty("code")&&"no_quota"==t.data.code&&(y(C+"#updraftvault_settings_connect").slideUp(),y(C+"#updraftvault_settings_default").slideDown())):t.data.hasOwnProperty("connected")&&t.data.connected&&t.data.hasOwnProperty("html")?(y(C+"#updraftvault_settings_connect").slideUp(),y(C+"#updraftvault_settings_connected").html(t.data.html).slideDown()):(console.log(t),UpdraftCentral_Library.dialog.alert("<h2>"+udclion.error+"</h2><p>"+udclion.js_exception_occurred+"</p>")))})})}),y("#updraftcentral_notice_container").on("click",".updraftplus_saved_settings a.updraft_authlink",function(t){var e=y(this).attr("href");if("undefined"!=typeof e){var a=y(this).closest(".updraftplus_saved_settings").data("site_id"),r=y('#updraftcentral_dashboard_existingsites .updraftcentral_site_row[data-site_id="'+a+'"');if(r.length<1)return void console.log("UpdraftCentral: UpdraftPlus: site row not found for the link clicked (site_id="+a+")");t.preventDefault();var n=y(this).closest(".updraftplus_saved_settings");UpdraftCentral_Library.open_browser_at(r,{module:"direct_url",url:e},n)}}),y("#updraftcentral_notice_container").on("click",".updraftcentral_listener .updraftplus_downloader_closebutton",function(t){t.preventDefault();var e=y(this).closest(".updraftcentral_listener");y(this).closest(".updraftplus_downloader").fadeOut().remove();var a=e.find(".updraftplus_downloader").length;a<1&&(console.log(e),e.clearQueue().slideUp("slow",function(){y(this).remove()}))}),y("#updraftcentral_notice_container").on("click",".updraftcentral_listener .updraft_downloaded",function(t){var e=y(this).data("site_id"),a=y('#updraftcentral_dashboard_existingsites .updraftcentral_site_row[data-site_id="'+e+'"');if(!(a.length<1)){var r=y(this).data("backup_timestamp"),n=y(this).data("what"),d=y(this).data("findex");UpdraftCentral_Library.open_browser_at(a,{module:"updraftplus",action:"download_file",data:{backup_timestamp:r,what:n,findex:d}},null)}}),y("#updraftcentral_notice_container").on("click",".updraftcentral_listener .updraft_delete_downloaded_backup",function(t){t.preventDefault();var e=this,a=y(this).data("site_id"),r=y('#updraftcentral_dashboard_existingsites .updraftcentral_site_row[data-site_id="'+a+'"'),n=y(this).data("findex"),d=y(this).data("what"),s=y(this).data("backup_timestamp");UpdraftCentral.send_site_rpc("updraftplus.delete_downloaded",{timestamp:s,site_id:a,type:d,findex:n},r,function(t,a,r){"ok"==a&&!1!==t&&t.hasOwnProperty("data")&&y(e).closest(".raw").html(udclion.updraftplus.entity_deleted)})}),y("#updraftcentral_notice_container, #updraftcentral_dashboard_existingsites").on("click",".updraftcentral_listener .updraft-log-link, .updraft_existing_backups_output .updraft-log-link",function(t){t.preventDefault();var e=y(this).data("jobid");if(e){var a=y(this).closest(".updraftcentral_listener, .updraftcentral_site_row"),r=a.data("site_id"),n=y('#updraftcentral_dashboard_existingsites .updraftcentral_site_row[data-site_id="'+r+'"');p(e,n)}else console.log(this),console.log("UpdraftPlus: A log link was clicked, but the Job ID could not be found")}),y("#updraftcentral_notice_container").on("click",".updraftcentral_listener .updraft_jobinfo_delete",function(t){t.preventDefault();var e=y(this).data("jobid");if(e){var a=y(this).closest(".updraftcentral_listener"),r=a.data("site_id"),n=y('#updraftcentral_dashboard_existingsites .updraftcentral_site_row[data-site_id="'+r+'"');f(e,n,a)}else console.log("UpdraftPlus: A stop job link was clicked, but the Job ID could not be found"),console.log(this)});var L,j,z=!1,$=!1,q=1,I=0}jQuery(document).ready(function(t){UpdraftCentral_Module_UpdraftPlus=new UpdraftCentral_UpdraftPlus_Module,jQuery(document).keyup(function(t){if((32===t.keyCode||13===t.keyCode)&&jQuery(document.activeElement).is("input.labelauty + label")){var e=jQuery(document.activeElement).attr("for");e&&jQuery("#"+e).change()}})});